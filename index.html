<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vive Artigas - Artigas, Uruguay</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <style>
        :root {
            --primary: #1E3A8A;
            --secondary: #FBBF24;
            --accent: #10B981;
        }
        .property-card, .agency-card, .neighborhood-card {
            transition: transform 0.3s, box-shadow 0.3s;
            animation: fadeIn 1s ease-in;
        }
        .property-card:hover, .agency-card:hover, .neighborhood-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        label.required::after { content: ' *'; color: #EF4444; }
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            animation: slideIn 1.5s ease-out;
        }
        .carousel-container { position: relative; overflow: hidden; }
        .carousel-slide { display: flex; transition: transform 0.5s ease-in-out; }
        .carousel-slide img { flex-shrink: 0; width: 100%; height: 400px; object-fit: cover; }
        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 12px;
            cursor: pointer;
            border-radius: 50%;
        }
        .carousel-btn.prev { left: 20px; }
        .carousel-btn.next { right: 20px; }
        .cta-button { animation: pulse 2s infinite; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .chat-bubble {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--secondary);
            color: black;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }
        .profile-card { animation: slideIn 0.8s ease-out; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/react-router-dom@5.3.4/umd/react-router-dom.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.23.9/babel.min.js"></script>
    <script type="text/babel">
        const { BrowserRouter, Route, Switch, Link, useParams, useHistory } = ReactRouterDOM;

        // Data
        const propertiesData = [
            { id: 1, type: "Casa", title: "Casa Céntrica en Artigas", description: "Casa de 3 dormitorios cerca de Plaza Artigas.", price: 25000, location: "Centro, Artigas", bedrooms: 3, bathrooms: 2, area: 120, yearBuilt: 2010, amenities: ["jardín", "garaje"], images: ["https://via.placeholder.com/600x400?text=Casa+Artigas+1"], pointsOfInterest: ["Plaza Artigas", "Escuela"], agencyId: 1, isFeatured: true, city: "Artigas" },
            { id: 2, type: "Apartamento", title: "Apartamento Moderno", description: "Apartamento nuevo en Barrio Norte.", price: 18000, location: "Norte, Artigas", bedrooms: 2, bathrooms: 1, area: 80, yearBuilt: 2020, amenities: ["balcón"], images: ["https://via.placeholder.com/600x400?text=Apartamento+1"], pointsOfInterest: ["Supermercado"], agencyId: null, isFeatured: false, city: "Artigas" }
        ];

        const agenciesData = [
            { id: 1, name: "Inmobiliaria Artigas", logo: "https://via.placeholder.com/100?text=Logo+Artigas", description: "Expertos en propiedades de Artigas desde 2010.", images: ["https://via.placeholder.com/300?text=Office+1"], plan: "Pro", contact: "098-123-456", website: "https://example.com", city: "Artigas" }
        ];

        const servicesData = [
            { id: 1, name: "Plomería Artigas", category: "Plomería", contact: "098-123-456", description: "Reparaciones 24/7 en Artigas.", city: "Artigas" }
        ];

        const neighborhoodsData = [
            { id: 1, name: "Centro", description: "Corazón de Artigas con acceso a Plaza Artigas y comercios.", amenities: ["Plaza Artigas", "Escuela", "Supermercado"], coordinates: { lat: -30.4000, lng: -56.4667 }, city: "Artigas" }
        ];

        const usersData = JSON.parse(localStorage.getItem('users')) || [
            { id: 1, email: "admin@viveartigas.com", password: "admin123", role: "admin", name: "Admin", profilePic: "https://via.placeholder.com/100?text=Admin", bio: "Administrador de Vive Artigas", createdAt: new Date().toISOString() }
        ];

        // Helper to save users to localStorage
        const saveUsers = (users) => {
            localStorage.setItem('users', JSON.stringify(users));
        };

        // Header Component
        function Header() {
            const [user, setUser] = React.useState(JSON.parse(localStorage.getItem('currentUser')));
            const history = useHistory();

            const handleLogout = () => {
                localStorage.removeItem('currentUser');
                setUser(null);
                history.push('/');
            };

            return (
                <header className="bg-[var(--primary)] text-white p-4 shadow-lg sticky top-0 z-10">
                    <nav className="container mx-auto flex justify-between items-center">
                        <Link to="/" className="text-2xl font-bold hover:text-[var(--secondary)]">Vive Artigas</Link>
                        <div className="flex items-center space-x-4">
                            <Link to="/" className="hover:text-[var(--secondary)]">Inicio</Link>
                            <Link to="/list" className="hover:text-[var(--secondary)]">Publicar Propiedad</Link>
                            <Link to="/agencies" className="hover:text-[var(--secondary)]">Inmobiliarias</Link>
                            <Link to="/services" className="hover:text-[var(--secondary)]">Servicios</Link>
                            <Link to="/neighborhoods" className="hover:text-[var(--secondary)]">Barrios</Link>
                            <Link to="/plans" className="hover:text-[var(--secondary)]">Planes</Link>
                            {user ? (
                                <>
                                    <Link to="/profile" className="hover:text-[var(--secondary)]">Perfil</Link>
                                    <button onClick={handleLogout} className="bg-[var(--secondary)] text-black px-3 py-1 rounded hover:bg-yellow-500">Cerrar Sesión</button>
                                </>
                            ) : (
                                <Link to="/login" className="bg-[var(--secondary)] text-black px-3 py-1 rounded hover:bg-yellow-500">Iniciar Sesión</Link>
                            )}
                        </div>
                    </nav>
                </header>
            );
        }

        // Footer Component
        function Footer() {
            return (
                <footer className="bg-gray-900 text-white p-6">
                    <div className="container mx-auto grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div>
                            <h3 className="text-lg font-semibold mb-2">Vive Artigas</h3>
                            <p>Tu plataforma para encontrar o publicar propiedades en todo Uruguay.</p>
                        </div>
                        <div>
                            <h3 className="text-lg font-semibold mb-2">Enlaces Útiles</h3>
                            <ul>
                                <li><Link to="/agencies" className="hover:text-[var(--secondary)]">Inmobiliarias</Link></li>
                                <li><Link to="/services" className="hover:text-[var(--secondary)]">Servicios</Link></li>
                                <li><Link to="/neighborhoods" className="hover:text-[var(--secondary)]">Barrios</Link></li>
                                <li><Link to="/plans" className="hover:text-[var(--secondary)]">Planes</Link></li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="text-lg font-semibold mb-2">Monetización</h3>
                            <ul>
                                <li><Link to="/plans" className="hover:text-[var(--secondary)]">Suscribirse como Inmobiliaria</Link></li>
                                <li><Link to="/advertise" className="hover:text-[var(--secondary)]">Publicidad</Link></li>
                                <li><a href="https://example.com/affiliates" target="_blank" className="hover:text-[var(--secondary)]">Programa de Afiliados</a></li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="text-lg font-semibold mb-2">Contacto</h3>
                            <p>Email: contacto@viveartigas.com</p>
                            <p>Teléfono: 098-123-456</p>
                            <div className="flex space-x-4 mt-2">
                                <a href="https://facebook.com" target="_blank" className="text-white hover:text-[var(--secondary)]"><i className="fab fa-facebook-f"></i></a>
                                <a href="https://twitter.com" target="_blank" className="text-white hover:text-[var(--secondary)]"><i className="fab fa-twitter"></i></a>
                                <a href="https://instagram.com" target="_blank" className="text-white hover:text-[var(--secondary)]"><i className="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                    <p className="text-center mt-6">© 2025 Vive Artigas - Uruguay. Todos los derechos reservados.</p>
                </footer>
            );
        }

        // HomePage Component
        function HomePage() {
            const [searchTerm, setSearchTerm] = React.useState('');
            const [filterType, setFilterType] = React.useState('');
            const [filterMinPrice, setFilterMinPrice] = React.useState('');
            const [filterMaxPrice, setFilterMaxPrice] = React.useState('');
            const [filterPointOfInterest, setFilterPointOfInterest] = React.useState('');
            const [filterCity, setFilterCity] = React.useState('Artigas');
            const [showFilters, setShowFilters] = React.useState(false);
            const [currentSlide, setCurrentSlide] = React.useState(0);

            const featuredImages = [
                "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",
                "https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",
                "https://images.unsplash.com/photo-1600566753376-77c1a7a26e57?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80"
            ];

            React.useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentSlide((prev) => (prev + 1) % featuredImages.length);
                }, 5000);
                return () => clearInterval(interval);
            }, []);

            const filteredProperties = propertiesData.filter(prop => {
                return (
                    (prop.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                     prop.location.toLowerCase().includes(searchTerm.toLowerCase()) ||
                     prop.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                     prop.type.toLowerCase().includes(searchTerm.toLowerCase())) &&
                    (!filterType || prop.type === filterType) &&
                    (!filterMinPrice || prop.price >= parseFloat(filterMinPrice)) &&
                    (!filterMaxPrice || prop.price <= parseFloat(filterMaxPrice)) &&
                    (!filterPointOfInterest || prop.pointsOfInterest.includes(filterPointOfInterest)) &&
                    (!filterCity || prop.city === filterCity)
                );
            });

            const aiRecommendation = filteredProperties.length > 0 ? filteredProperties[0] : null;

            return (
                <div>
                    <section className="hero-section text-white py-24 text-center">
                        <div className="container mx-auto">
                            <h1 className="text-5xl font-bold mb-4">Tu Hogar Ideal en Uruguay</h1>
                            <p className="text-xl mb-6">Explora propiedades únicas en Artigas y todo el país.</p>
                            <Link to="/list" className="cta-button inline-block bg-[var(--secondary)] text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500">Publica Tu Propiedad</Link>
                        </div>
                    </section>

                    <section className="container mx-auto p-6">
                        <div className="mb-8 p-8 Bg-white rounded-lg shadow-xl">
                            <h2 className="text-3xl font-semibold mb-4 text-center text-[var(--primary)]">Busca Tu Propiedad Ideal</h2>
                            <input
                                type="text"
                                placeholder="Buscar por título, ubicación, tipo..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="w-full p-4 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"
                            />
                            <button
                                onClick={() => setShowFilters(!showFilters)}
                                className="w-full sm:w-auto bg-[var(--primary)] text-white px-6 py-3 rounded-lg hover:bg-blue-800"
                            >
                                {showFilters ? 'Ocultar Filtros' : 'Filtros Avanzados'}
                            </button>
                            {showFilters && (
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mt-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">Tipo:</label>
                                        <select value={filterType} onChange={(e) => setFilterType(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md">
                                            <option value="">Todos</option>
                                            <option value="Casa">Casa</option>
                                            <option value="Apartamento">Apartamento</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">Precio Mínimo (UYU):</label>
                                        <input type="number" value={filterMinPrice} onChange={(e) => setFilterMinPrice(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">Precio Máximo (UYU):</label>
                                        <input type="number" value={filterMaxPrice} onChange={(e) => setFilterMaxPrice(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">Cerca de:</label>
                                        <select value={filterPointOfInterest} onChange={(e) => setFilterPointOfInterest(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md">
                                            <option value="">Todos</option>
                                            <option value="Plaza Artigas">Plaza Artigas</option>
                                            <option value="Escuela">Escuela</option>
                                            <option value="Supermercado">Supermercado</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">Ciudad:</label>
                                        <select value={filterCity} onChange={(e) => setFilterCity(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md">
                                            <option value="Artigas">Artigas</option>
                                            <option value="Montevideo">Montevideo</option>
                                            <option value="Salto">Salto</option>
                                        </select>
                                    </div>
                                </div>
                            )}
                        </div>

                        {aiRecommendation && (
                            <div className="mb-8 p-6 bg-[var(--accent)]/10 rounded-lg shadow-md">
                                <h2 className="text-2xl font-semibold mb-4 text-[var(--primary)]">Recomendación IA</h2>
                                <div className="property-card bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                                    <img src={aiRecommendation.images[0]} alt={aiRecommendation.title} className="w-full h-48 object-cover" />
                                    <div className="p-4 flex-grow flex flex-col justify-between">
                                        <div>
                                            <span className="inline-block bg-[var(--accent)] text-white text-xs px-2 rounded-full mb-1">{aiRecommendation.type}</span>
                                            <h3 className="text-xl font-semibold mb-1">{aiRecommendation.title}</h3>
                                            <p className="text-gray-600 text-sm mb-2">{aiRecommendation.location}</p>
                                        </div>
                                        <div>
                                            <p className="text-2xl font-bold text-[var(--primary)] mb-3">UYU {aiRecommendation.price}/mes</p>
                                            <Link to={`/property/${aiRecommendation.id}`} className="block text-center bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-blue-800">Ver Detalles</Link>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        <h2 className="text-3xl font-semibold mb-6 text-center text-[var(--primary)]">Propiedades Destacadas</h2>
                        <div className="carousel-container mb-8">
                            <div className="carousel-slide" style={{ transform: `translateX(-${currentSlide * 100}%)` }}>
                                {filteredProperties.filter(p => p.isFeatured).slice(0, 3).map(prop => (
                                    <div key={prop.id} className="property-card">
                                        <img src={prop.images[0]} alt={prop.title} />
                                    </div>
                                ))}
                            </div>
                            <div className="carousel-btn prev" onClick={() => setCurrentSlide((prev) => (prev - 1 + featuredImages.length) % featuredImages.length)}><i className="fas fa-chevron-left"></i></div>
                            <div className="carousel-btn next" onClick={() => setCurrentSlide((prev) => (prev + 1) % featuredImages.length)}><i className="fas fa-chevron-right"></i></div>
                        </div>
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                            {filteredProperties.filter(p => p.isFeatured).slice(0, 3).map(prop => (
                                <div key={prop.id} className="property-card bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                                    <img src={prop.images[0]} alt={prop.title} className="w-full h-48 object-cover" />
                                    <div className="p-4 flex-grow flex flex-col justify-between">
                                        <div>
                                            <span className="inline-block bg-[var(--accent)] text-white text-xs px-2 rounded-full mb-1">{prop.type}</span>
                                            <h3 className="text-xl font-semibold mb-1">{prop.title}</h3>
                                            <p className="text-gray-600 text-sm mb-2">{prop.location}</p>
                                            <div className="text-gray-700 text-sm mb-3">
                                                <span>{prop.bedrooms} <i className="fas fa-bed"></i></span> | 
                                                <span>{prop.bathrooms} <i className="fas fa-bath"></i></span> | 
                                                <span>{prop.area} m²</span>
                                            </div>
                                        </div>
                                        <div>
                                            <p className="text-2xl font-bold text-[var(--primary)] mb-3">UYU {prop.price}/mes</p>
                                            <Link to={`/property/${prop.id}`} className="block text-center bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-blue-800">Ver Detalles</Link>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        <h2 className="text-3xl font-semibold mb-6 text-center text-[var(--primary)]">Por Qué Elegirnos</h2>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div className="bg-white p-6 rounded-lg shadow-md text-center">
                                <i className="fas fa-home text-4xl text-[var(--accent)] mb-4"></i>
                                <h3 className="text-xl font-semibold mb-2">Servicio Excepcional</h3>
                                <p className="text-gray-600">Soporte 24/7 y recomendaciones personalizadas con IA.</p>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow-md text-center">
                                <i className="fas fa-map-marked-alt text-4xl text-[var(--accent)] mb-4"></i>
                                <h3 className="text-xl font-semibold mb-2">Cobertura Nacional</h3>
                                <p className="text-gray-600">Propiedades en Artigas y pronto en todo Uruguay.</p>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow-md text-center">
                                <i className="fas fa-users text-4xl text-[var(--accent)] mb-4"></i>
                                <h3 className="text-xl font-semibold mb-2">Comunidad Confiable</h3>
                                <p className="text-gray-600">Conecta con inmobiliarias y clientes verificados.</p>
                            </div>
                        </div>

                        <h2 className="text-3xl font-semibold mb-6 text-center text-[var(--primary)]">Testimonios</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div className="bg-white p-6 rounded-lg shadow-md">
                                <p className="text-gray-700 italic mb-2">"Encontré mi hogar ideal en solo días gracias a Vive Artigas!"</p>
                                <p className="text-[var(--primary)] font-semibold">- María G.</p>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow-md">
                                <p className="text-gray-700 italic mb-2">"La plataforma es intuitiva y el soporte es excepcional."</p>
                                <p className="text-[var(--primary)] font-semibold">- Juan P.</p>
                            </div>
                        </div>

                        <div className="bg-[var(--primary)] text-white p-8 rounded-lg shadow-xl text-center">
                            <h2 className="text-3xl font-semibold mb-4">¿Listo para Tu Nuevo Hogar?</h2>
                            <p className="mb-6">Explora propiedades o publica la tuya en minutos.</p>
                            <Link to="/list" className="cta-button inline-block bg-[var(--secondary)] text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500">Comienza Ahora</Link>
                        </div>
                    </section>

                    <div className="chat-bubble" onClick={() => alert('¡Chatea con nuestro equipo de soporte!')}>
                        <i className="fas fa-comment-alt mr-2"></i> Soporte en Vivo
                    </div>
                </div>
            );
        }

        // LoginPage Component
        function LoginPage() {
            const [email, setEmail] = React.useState('');
            const [password, setPassword] = React.useState('');
            const [error, setError] = React.useState('');
            const history = useHistory();

            const handleLogin = (e) => {
                e.preventDefault();
                const user = usersData.find(u => u.email === email && u.password === password);
                if (user) {
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    history.push(user.role === 'admin' ? '/admin' : '/profile');
                } else {
                    setError('Credenciales incorrectas.');
                }
            };

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-center text-[var(--primary)]">Iniciar Sesión</h1>
                    <div className="max-w-md mx-auto bg-white p-8 rounded-lg shadow-xl">
                        <form onSubmit={handleLogin} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Email:</label>
                                <input
                                    type="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                    required
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Contraseña:</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                    required
                                />
                            </div>
                            {error && <p className="text-red-500 text-sm">{error}</p>}
                            <button type="submit" className="w-full bg-[var(--primary)] text-white p-3 rounded-lg hover:bg-blue-800">Iniciar Sesión</button>
                        </form>
                        <p className="mt-4 text-center">
                            ¿No tienes cuenta? <Link to="/register" className="text-[var(--accent)] hover:underline">Regístrate</Link>
                        </p>
                    </div>
                </div>
            );
        }

        // RegisterPage Component
        function RegisterPage() {
            const [formData, setFormData] = React.useState({
                email: '', password: '', name: '', role: 'client', profilePic: '', bio: '', city: 'Artigas'
            });
            const [errors, setErrors] = React.useState({});
            const history = useHistory();

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};
                if (!formData.email) newErrors.email = 'El email es obligatorio.';
                if (!formData.password) newErrors.password = 'La contraseña es obligatoria.';
                if (!formData.name) newErrors.name = 'El nombre es obligatorio.';
                if (usersData.find(u => u.email === formData.email)) newErrors.email = 'El email ya está registrado.';
                setErrors(newErrors);
                if (Object.keys(newErrors).length > 0) return;

                const newUser = {
                    id: Date.now(),
                    ...formData,
                    profilePic: formData.profilePic || 'https://via.placeholder.com/100?text=Profile',
                    createdAt: new Date().toISOString()
                };
                usersData.push(newUser);
                saveUsers(usersData);
                localStorage.setItem('currentUser', JSON.stringify(newUser));
                history.push('/profile');
            };

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-center text-[var(--primary)]">Crear Perfil</h1>
                    <div className="max-w-md mx-auto bg-white p-8 rounded-lg shadow-xl">
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Email:</label>
                                <input
                                    type="email"
                                    value={formData.email}
                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                                {errors.email && <p className="text-red-500 text-sm mt-1">{errors.email}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Contraseña:</label>
                                <input
                                    type="password"
                                    value={formData.password}
                                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                                {errors.password && <p className="text-red-500 text-sm mt-1">{errors.password}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Nombre:</label>
                                <input
                                    type="text"
                                    value={formData.name}
                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                                {errors.name && <p className="text-red-500 text-sm mt-1">{errors.name}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Rol:</label>
                                <select
                                    value={formData.role}
                                    onChange={(e) => setFormData({ ...formData, role: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                >
                                    <option value="client">Cliente</option>
                                    <option value="agency">Inmobiliaria</option>
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Foto de Perfil (URL):</label>
                                <input
                                    type="url"
                                    value={formData.profilePic}
                                    onChange={(e) => setFormData({ ...formData, profilePic: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Biografía:</label>
                                <textarea
                                    value={formData.bio}
                                    onChange={(e) => setFormData({ ...formData, bio: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                    rows="4"
                                ></textarea>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Ciudad:</label>
                                <select
                                    value={formData.city}
                                    onChange={(e) => setFormData({ ...formData, city: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                >
                                    <option value="Artigas">Artigas</option>
                                    <option value="Montevideo">Montevideo</option>
                                    <option value="Salto">Salto</option>
                                </select>
                            </div>
                            <button type="submit" className="w-full bg-[var(--primary)] text-white p-3 rounded-lg hover:bg-blue-800">Crear Perfil</button>
                        </form>
                    </div>
                </div>
            );
        }

        // ProfilePage Component
        function ProfilePage() {
            const [user, setUser] = React.useState(JSON.parse(localStorage.getItem('currentUser')));
            const [formData, setFormData] = React.useState(user || {});
            const [errors, setErrors] = React.useState({});
            const history = useHistory();

            if (!user) {
                history.push('/login');
                return null;
            }

            const handleUpdate = (e) => {
                e.preventDefault();
                const newErrors = {};
                if (!formData.email) newErrors.email = 'El email es obligatorio.';
                if (!formData.name) newErrors.name = 'El nombre es obligatorio.';
                setErrors(newErrors);
                if (Object.keys(newErrors).length > 0) return;

                const updatedUsers = usersData.map(u => u.id === user.id ? { ...formData, id: user.id, role: user.role, createdAt: user.createdAt } : u);
                saveUsers(updatedUsers);
                localStorage.setItem('currentUser', JSON.stringify(formData));
                setUser(formData);
                alert('Perfil actualizado.');
            };

            const userProperties = user.role === 'client' ? propertiesData.filter(p => p.agencyId === null && p.userId === user.id) : propertiesData.filter(p => p.agencyId === user.id);

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-center text-[var(--primary)]">Mi Perfil</h1>
                    <div className="profile-card max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-xl mb-8">
                        <img src={formData.profilePic} alt={formData.name} className="w-32 h-32 rounded-full mx-auto mb-4 object-cover" />
                        <form onSubmit={handleUpdate} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Email:</label>
                                <input
                                    type="email"
                                    value={formData.email}
                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                                {errors.email && <p className="text-red-500 text-sm mt-1">{errors.email}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Nombre:</label>
                                <input
                                    type="text"
                                    value={formData.name}
                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                                {errors.name && <p className="text-red-500 text-sm mt-1">{errors.name}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Foto de Perfil (URL):</label>
                                <input
                                    type="url"
                                    value={formData.profilePic}
                                    onChange={(e) => setFormData({ ...formData, profilePic: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Biografía:</label>
                                <textarea
                                    value={formData.bio}
                                    onChange={(e) => setFormData({ ...formData, bio: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                    rows="4"
                                ></textarea>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Ciudad:</label>
                                <select
                                    value={formData.city}
                                    onChange={(e) => setFormData({ ...formData, city: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                >
                                    <option value="Artigas">Artigas</option>
                                    <option value="Montevideo">Montevideo</option>
                                    <option value="Salto">Salto</option>
                                </select>
                            </div>
                            <button type="submit" className="w-full bg-[var(--primary)] text-white p-3 rounded-lg hover:bg-blue-800">Actualizar Perfil</button>
                        </form>
                    </div>

                    {user.role !== 'admin' && (
                        <>
                            <h2 className="text-2xl font-semibold mb-4 text-[var(--primary)]">Mis Propiedades</h2>
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                {userProperties.map(prop => (
                                    <div key={prop.id} className="property-card bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                                        <img src={prop.images[0]} alt={prop.title} className="w-full h-48 object-cover" />
                                        <div className="p-4 flex-grow flex flex-col justify-between">
                                            <div>
                                                <span className="inline-block bg-[var(--accent)] text-white text-xs px-2 rounded-full mb-1">{prop.type}</span>
                                                <h3 className="text-xl font-semibold mb-1">{prop.title}</h3>
                                                <p className="text-gray-600 text-sm mb-2">{prop.location}</p>
                                            </div>
                                            <div>
                                                <p className="text-2xl font-bold text-[var(--primary)] mb-3">UYU {prop.price}/mes</p>
                                                <Link to={`/property/${prop.id}`} className="block text-center bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-blue-800">Ver Detalles</Link>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </>
                    )}
                </div>
            );
        }

        // AdminPage Component
        function AdminPage() {
            const [user] = React.useState(JSON.parse(localStorage.getItem('currentUser')));
            const [users, setUsers] = React.useState(usersData);
            const history = useHistory();

            if (!user || user.role !== 'admin') {
                history.push('/login');
                return null;
            }

            const handleDeleteUser = (userId) => {
                const updatedUsers = users.filter(u => u.id !== userId);
                setUsers(updatedUsers);
                saveUsers(updatedUsers);
                alert('Usuario eliminado.');
            };

            const handleToggleFeatured = (propId) => {
                propertiesData.forEach(prop => {
                    if (prop.id === propId) {
                        prop.isFeatured = !prop.isFeatured;
                    }
                });
                alert('Estado de propiedad actualizado.');
            };

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-center text-[var(--primary)]">Panel de Administración</h1>
                    <h2 className="text-2xl font-semibold mb-4 text-[var(--primary)]">Gestionar Usuarios</h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        {users.filter(u => u.role !== 'admin').map(u => (
                            <div key={u.id} className="bg-white p-4 rounded-lg shadow-md">
                                <h3 className="text-xl font-semibold">{u.name}</h3>
                                <p className="text-gray-600">Email: {u.email}</p>
                                <p className="text-gray-600">Rol: {u.role}</p>
                                <p className="text-gray-600">Ciudad: {u.city}</p>
                                <button
                                    onClick={() => handleDeleteUser(u.id)}
                                    className="mt-2 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"
                                >
                                    Eliminar
                                </button>
                            </div>
                        ))}
                    </div>
                    <h2 className="text-2xl font-semibold mb-4 text-[var(--primary)]">Gestionar Propiedades</h2>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        {propertiesData.map(prop => (
                            <div key={prop.id} className="property-card bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                                <img src={prop.images[0]} alt={prop.title} className="w-full h-48 object-cover" />
                                <div className="p-4 flex-grow flex flex-col justify-between">
                                    <div>
                                        <span className="inline-block bg-[var(--accent)] text-white text-xs px-2 rounded-full mb-1">{prop.type}</span>
                                        <h3 className="text-xl font-semibold mb-1">{prop.title}</h3>
                                        <p className="text-gray-600 text-sm mb-2">{prop.location}</p>
                                    </div>
                                    <div>
                                        <p className="text-2xl font-bold text-[var(--primary)] mb-3">UYU {prop.price}/mes</p>
                                        <button
                                            onClick={() => handleToggleFeatured(prop.id)}
                                            className={`block text-center px-4 py-2 rounded ${prop.isFeatured ? 'bg-yellow-500 text-black' : 'bg-gray-500 text-white'} hover:bg-opacity-80`}
                                        >
                                            {prop.isFeatured ? 'Quitar Destacado' : 'Marcar Destacado'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // PropertyPage Component
        function PropertyPage() {
            const { id } = useParams();
            const property = propertiesData.find(p => p.id === parseInt(id));
            if (!property) return <div className="container mx-auto p-6">Propiedad no encontrada</div>;
            const agency = agenciesData.find(a => a.id === property.agencyId);
            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-[var(--primary)]">{property.title}</h1>
                    <img src={property.images[0]} alt={property.title} className="w-full h-96 object-cover rounded-lg mb-4" />
                    <p className="text-gray-700 mb-4">{property.description}</p>
                    <p className="text-2xl font-bold text-[var(--primary)] mb-4">UYU {property.price}/mes</p>
                    <p className="text-gray-600 mb-2"><strong>Ubicación:</strong> {property.location}</p>
                    <p className="text-gray-600 mb-2"><strong>Dormitorios:</strong> {property.bedrooms}</p>
                    <p className="text-gray-600 mb-2"><strong>Baños:</strong> {property.bathrooms}</p>
                    <p className="text-gray-600 mb-2"><strong>Área:</strong> {property.area} m²</p>
                    <p className="text-gray-600 mb-4"><strong>Puntos de Interés:</strong> {property.pointsOfInterest.join(', ')}</p>
                    {agency && (
                        <div className="bg-white p-4 rounded-lg shadow-md mb-4">
                            <h3 className="text-xl font-semibold mb-2">Publicado por: {agency.name}</h3>
                            <img src={agency.logo} alt={agency.name} className="w-24 h-24 object-contain mb-2" />
                            <p className="text-gray-600">{agency.description}</p>
                            <p className="text-[var(--accent)]">Contacto: {agency.contact}</p>
                        </div>
                    )}
                    <Link to="/" className="inline-block bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-blue-800">Volver</Link>
                </div>
            );
        }

        // ListPropertyPage Component
        function ListPropertyPage() {
            const [user] = React.useState(JSON.parse(localStorage.getItem('currentUser')));
            const [formData, setFormData] = React.useState({
                type: '', title: '', description: '', price: '', location: '', bedrooms: '', bathrooms: '', area: '', amenities: [], images: [''], pointsOfInterest: [], city: 'Artigas'
            });
            const [errors, setErrors] = React.useState({});
            const history = useHistory();

            if (!user) {
                history.push('/login');
                return null;
            }

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};
                if (!formData.type) newErrors.type = 'El tipo es obligatorio.';
                if (!formData.title) newErrors.title = 'El título es obligatorio.';
                if (!formData.price) newErrors.price = 'El precio es obligatorio.';
                if (!formData.location) newErrors.location = 'La ubicación es obligatoria.';
                setErrors(newErrors);
                if (Object.keys(newErrors).length > 0) return;

                propertiesData.push({
                    id: Date.now(),
                    ...formData,
                    agencyId: user.role === 'agency' ? user.id : null,
                    userId: user.role === 'client' ? user.id : null,
                    isFeatured: false
                });
                alert('Propiedad publicada (simulada).');
                history.push('/profile');
            };

            const handleAmenityChange = (amenity) => {
                setFormData({
                    ...formData,
                    amenities: formData.amenities.includes(amenity)
                        ? formData.amenities.filter(a => a !== amenity)
                        : [...formData.amenities, amenity]
                });
            };

            const handlePoiChange = (poi) => {
                setFormData({
                    ...formData,
                    pointsOfInterest: formData.pointsOfInterest.includes(poi)
                        ? formData.pointsOfInterest.filter(p => p !== poi)
                        : [...formData.pointsOfInterest, poi]
                });
            };

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-[var(--primary)]">Publicar Propiedad</h1>
                    <form onSubmit={handleSubmit} className="bg-white p-8 rounded-lg shadow-xl space-y-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 required">Tipo:</label>
                            <select
                                value={formData.type}
                                onChange={(e) => setFormData({ ...formData, type: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            >
                                <option value="">Selecciona</option>
                                <option value="Casa">Casa</option>
                                <option value="Apartamento">Apartamento</option>
                            </select>
                            {errors.type && <p className="text-red-500 text-sm mt-1">{errors.type}</p>}
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700 required">Título:</label>
                            <input
                                type="text"
                                value={formData.title}
                                onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                            {errors.title && <p className="text-red-500 text-sm mt-1">{errors.title}</p>}
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Descripción:</label>
                            <textarea
                                value={formData.description}
                                onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                rows="4"
                            ></textarea>
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700 required">Precio (UYU):</label>
                            <input
                                type="number"
                                value={formData.price}
                                onChange={(e) => setFormData({ ...formData, price: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                            {errors.price && <p className="text-red-500 text-sm mt-1">{errors.price}</p>}
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700 required">Ubicación:</label>
                            <input
                                type="text"
                                value={formData.location}
                                onChange={(e) => setFormData({ ...formData, location: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                            {errors.location && <p className="text-red-500 text-sm mt-1">{errors.location}</p>}
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Dormitorios:</label>
                            <input
                                type="number"
                                value={formData.bedrooms}
                                onChange={(e) => setFormData({ ...formData, bedrooms: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Baños:</label>
                            <input
                                type="number"
                                value={formData.bathrooms}
                                onChange={(e) => setFormData({ ...formData, bathrooms: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Área (m²):</label>
                            <input
                                type="number"
                                value={formData.area}
                                onChange={(e) => setFormData({ ...formData, area: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Ciudad:</label>
                            <select
                                value={formData.city}
                                onChange={(e) => setFormData({ ...formData, city: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            >
                                <option value="Artigas">Artigas</option>
                                <option value="Montevideo">Montevideo</option>
                                <option value="Salto">Salto</option>
                            </select>
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Comodidades:</label>
                            <div className="flex flex-wrap gap-4">
                                {['jardín', 'garaje', 'balcón', 'piscina'].map(amenity => (
                                    <label key={amenity} className="flex items-center">
                                        <input
                                            type="checkbox"
                                            checked={formData.amenities.includes(amenity)}
                                            onChange={() => handleAmenityChange(amenity)}
                                            className="mr-2"
                                        />
                                        {amenity}
                                    </label>
                                ))}
                            </div>
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Puntos de Interés:</label>
                            <div className="flex flex-wrap gap-4">
                                {['Plaza Artigas', 'Escuela', 'Supermercado'].map(poi => (
                                    <label key={poi} className="flex items-center">
                                        <input
                                            type="checkbox"
                                            checked={formData.pointsOfInterest.includes(poi)}
                                            onChange={() => handlePoiChange(poi)}
                                            className="mr-2"
                                        />
                                        {poi}
                                    </label>
                                ))}
                            </div>
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Imagen (URL):</label>
                            <input
                                type="url"
                                value={formData.images[0]}
                                onChange={(e) => setFormData({ ...formData, images: [e.target.value] })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                        </div>
                        <button type="submit" className="w-full bg-[var(--primary)] text-white p-3 rounded-lg hover:bg-blue-800">Publicar Propiedad</button>
                    </form>
                </div>
            );
        }

        // AgenciesPage Component
        function AgenciesPage() {
            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold text-center mb-6 text-[var(--primary)]">Inmobiliarias en Uruguay</h1>
                    <p className="text-center text-gray-600 mb-6">Conecta con las mejores inmobiliarias del país.</p>
                    <Link to="/create-agency" className="inline-block bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-blue-800 mb-6">Crear Perfil Inmobiliaria</Link>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        {agenciesData.map(agency => (
                            <div key={agency.id} className="agency-card bg-white p-4 rounded-lg shadow-md">
                                <img src={agency.logo} alt={agency.name} className="w-24 h-24 object-contain mx-auto mb-4" />
                                <h3 className="text-xl font-semibold text-center mb-2">{agency.name}</h3>
                                <p className="text-gray-600 text-center mb-2">{agency.description}</p>
                                <p className="text-gray-600 text-center mb-2"><strong>Plan:</strong> {agency.plan}</p>
                                <p className="text-[var(--accent)] text-center mb-2"><strong>Contacto:</strong> {agency.contact}</p>
                                <a href={agency.website} target="_blank" className="text-[var(--accent)] text-center block mb-2">Visitar sitio web</a>
                                <div className="flex flex-wrap gap-2 justify-center">
                                    {agency.images.map((img, idx) => (
                                        <img key={idx} src={img} alt={`Office ${idx}`} className="w-20 h-20 object-cover rounded" />
                                    ))}
                                </div>
                                <Link to={`/agency/${agency.id}`} className="block text-center bg-[var(--primary)] text-white px-4 py-2 rounded mt-4 hover:bg-blue-800">Ver Perfil</Link>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // CreateAgencyPage Component
        function CreateAgencyPage() {
            const [formData, setFormData] = React.useState({
                name: '', logo: '', description: '', images: [''], plan: 'Básico', contact: '', website: '', city: 'Artigas'
            });
            const [errors, setErrors] = React.useState({});
            const history = useHistory();

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};
                if (!formData.name) newErrors.name = 'El nombre es obligatorio.';
                if (!formData.description) newErrors.description = 'La descripción es obligatoria.';
                if (!formData.contact) newErrors.contact = 'El contacto es obligatorio.';
                setErrors(newErrors);
                if (Object.keys(newErrors).length > 0) return;

                agenciesData.push({ id: Date.now(), ...formData });
                alert('Perfil de inmobiliaria creado (simulado).');
                history.push('/agencies');
            };

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-[var(--primary)]">Crear Perfil de Inmobiliaria</h1>
                    <form onSubmit={handleSubmit} className="bg-white p-8 rounded-lg shadow-xl space-y-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 required">Nombre:</label>
                            <input
                                type="text"
                                value={formData.name}
                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                            {errors.name && <p className="text-red-500 text-sm mt-1">{errors.name}</p>}
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Logo (URL):</label>
                            <input
                                type="url"
                                value={formData.logo}
                                onChange={(e) => setFormData({ ...formData, logo: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700 required">Descripción:</label>
                            <textarea
                                value={formData.description}
                                onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                rows="4"
                            ></textarea>
                            {errors.description && <p className="text-red-500 text-sm mt-1">{errors.description}</p>}
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Imágenes (URL):</label>
                            <input
                                type="url"
                                value={formData.images[0]}
                                onChange={(e) => setFormData({ ...formData, images: [e.target.value] })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Plan:</label>
                            <select
                                value={formData.plan}
                                onChange={(e) => setFormData({ ...formData, plan: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            >
                                <option value="Básico">Básico ($10/mes)</option>
                                <option value="Pro">Pro ($25/mes)</option>
                                <option value="Premium">Premium ($50/mes)</option>
                            </select>
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700 required">Contacto:</label>
                            <input
                                type="text"
                                value={formData.contact}
                                onChange={(e) => setFormData({ ...formData, contact: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                            {errors.contact && <p className="text-red-500 text-sm mt-1">{errors.contact}</p>}
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Sitio Web:</label>
                            <input
                                type="url"
                                value={formData.website}
                                onChange={(e) => setFormData({ ...formData, website: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Ciudad:</label>
                            <select
                                value={formData.city}
                                onChange={(e) => setFormData({ ...formData, city: e.target.value })}
                                className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                            >
                                <option value="Artigas">Artigas</option>
                                <option value="Montevideo">Montevideo</option>
                                <option value="Salto">Salto</option>
                            </select>
                        </div>
                        <button type="submit" className="w-full bg-[var(--primary)] text-white p-3 rounded-lg hover:bg-blue-800">Crear Perfil</button>
                    </form>
                </div>
            );
        }

        // AgencyProfilePage Component
        function AgencyProfilePage() {
            const { id } = useParams();
            const agency = agenciesData.find(a => a.id === parseInt(id));
            if (!agency) return <div className="container mx-auto p-6">Inmobiliaria no encontrada</div>;
            const agencyProperties = propertiesData.filter(p => p.agencyId === agency.id);
            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold mb-6 text-[var(--primary)]">{agency.name}</h1>
                    <div className="bg-white p-6 rounded-lg shadow-md mb-6">
                        <img src={agency.logo} alt={agency.name} className="w-32 h-32 object-contain mx-auto mb-4" />
                        <p className="text-gray-700 mb-4">{agency.description}</p>
                        <p className="text-gray-600 mb-2"><strong>Plan:</strong> {agency.plan}</p>
                        <p className="text-[var(--accent)] mb-2"><strong>Contacto:</strong> {agency.contact}</p>
                        {agency.website && <a href={agency.website} target="_blank" className="text-[var(--accent)] mb-2 block">Visitar sitio web</a>}
                        <div className="flex flex-wrap gap-2 justify-center">
                            {agency.images.map((img, idx) => (
                                <img key={idx} src={img} alt={`Office ${idx}`} className="w-24 h-24 object-cover rounded" />
                            ))}
                        </div>
                    </div>
                    <h2 className="text-2xl font-semibold mb-4 text-[var(--primary)]">Propiedades de {agency.name}</h2>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        {agencyProperties.map(prop => (
                            <div key={prop.id} className="property-card bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                                <img src={prop.images[0]} alt={prop.title} className="w-full h-48 object-cover" />
                                <div className="p-4 flex-grow flex flex-col justify-between">
                                    <div>
                                        <span className="inline-block bg-[var(--accent)] text-white text-xs px-2 rounded-full mb-1">{prop.type}</span>
                                        <h3 className="text-xl font-semibold mb-1">{prop.title}</h3>
                                        <p className="text-gray-600 text-sm mb-2">{prop.location}</p>
                                    </div>
                                    <div>
                                        <p className="text-2xl font-bold text-[var(--primary)] mb-3">UYU {prop.price}/mes</p>
                                        <Link to={`/property/${prop.id}`} className="block text-center bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-blue-800">Ver Detalles</Link>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                    <Link to="/agencies" className="inline-block bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-blue-800 mt-6">Volver</Link>
                </div>
            );
        }

        // LocalServicesPage Component
        function LocalServicesPage() {
            const [services, setServices] = React.useState(servicesData);
            const [formData, setFormData] = React.useState({ name: '', category: '', contact: '', description: '', city: 'Artigas' });
            const [errors, setErrors] = React.useState({});

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};
                if (!formData.name) newErrors.name = 'El nombre es obligatorio.';
                if (!formData.category) newErrors.category = 'La categoría es obligatoria.';
                if (!formData.contact) newErrors.contact = 'El contacto es obligatorio.';
                setErrors(newErrors);
                if (Object.keys(newErrors).length > 0) return;
                setServices([...services, { id: Date.now(), ...formData }]);
                setFormData({ name: '', category: '', contact: '', description: '', city: 'Artigas' });
                alert('Servicio añadido (simulado).');
            };

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold text-center mb-6 text-[var(--primary)]">Directorio de Servicios Locales</h1>
                    <div className="bg-white p-8 rounded-lg shadow-xl mb-6">
                        <h2 className="text-2xl font-semibold mb-4 text-[var(--primary)]">Añadir Servicio</h2>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Nombre:</label>
                                <input
                                    type="text"
                                    value={formData.name}
                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                                {errors.name && <p className="text-red-500 text-sm mt-1">{errors.name}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Categoría:</label>
                                <select
                                    value={formData.category}
                                    onChange={(e) => setFormData({ ...formData, category: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                >
                                    <option value="">Selecciona</option>
                                    <option value="Plomería">Plomería</option>
                                    <option value="Mudanzas">Mudanzas</option>
                                    <option value="Electricidad">Electricidad</option>
                                </select>
                                {errors.category && <p className="text-red-500 text-sm mt-1">{errors.category}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 required">Contacto:</label>
                                <input
                                    type="text"
                                    value={formData.contact}
                                    onChange={(e) => setFormData({ ...formData, contact: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                />
                                {errors.contact && <p className="text-red-500 text-sm mt-1">{errors.contact}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Descripción:</label>
                                <textarea
                                    value={formData.description}
                                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                    rows="3"
                                ></textarea>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Ciudad:</label>
                                <select
                                    value={formData.city}
                                    onChange={(e) => setFormData({ ...formData, city: e.target.value })}
                                    className="mt-1 w-full p-2 border border-gray-300 rounded-md"
                                >
                                    <option value="Artigas">Artigas</option>
                                    <option value="Montevideo">Montevideo</option>
                                    <option value="Salto">Salto</option>
                                </select>
                            </div>
                            <button type="submit" className="w-full bg-[var(--primary)] text-white p-3 rounded-lg hover:bg-blue-800">Añadir Servicio</button>
                        </form>
                    </div>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        {services.map(service => (
                            <div key={service.id} className="bg-white p-4 rounded-lg shadow-md">
                                <h3 className="text-xl font-semibold text-[var(--primary)]">{service.name}</h3>
                                <p className="text-gray-600">{service.category}</p>
                                <p className="text-gray-700">{service.description}</p>
                                <p className="text-[var(--accent)] font-semibold">Contacto: {service.contact}</p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // NeighborhoodGuidePage Component
        function NeighborhoodGuidePage() {
            React.useEffect(() => {
                neighborhoodsData.forEach(neighborhood => {
                    const map = L.map(`map-${neighborhood.id}`).setView([neighborhood.coordinates.lat, neighborhood.coordinates.lng], 13);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                    }).addTo(map);
                    L.marker([neighborhood.coordinates.lat, neighborhood.coordinates.lng])
                        .addTo(map)
                        .bindPopup(`<b>${neighborhood.name}</b>`)
                        .openPopup();
                });
            }, []);

            return (
                <div className="container mx-auto p-6">
                    <h1 className="text-3xl font-bold text-center mb-6 text-[var(--primary)]">Guía de Barrios</h1>
                    <p className="text-center text-gray-600 mb-6">Explora los mejores barrios de Uruguay.</p>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        {neighborhoodsData.map(neighborhood => (
                            <div key={neighborhood.id} className
